<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/es-analysis/plato"

    >plato (v1.7.0)</a>
</h1>
<h4>JavaScript source analysis and visualizer</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato">module plato</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.Gruntfile">
            function <span class="apidocSignatureSpan">plato.</span>Gruntfile
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.getOverviewReport">
            function <span class="apidocSignatureSpan">plato.</span>getOverviewReport
            <span class="apidocSignatureSpan">(reports)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.inspect">
            function <span class="apidocSignatureSpan">plato.</span>inspect
            <span class="apidocSignatureSpan">(files, outputDir, options, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger">
            function <span class="apidocSignatureSpan">plato.</span>logger
            <span class="apidocSignatureSpan">(level)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">plato.</span>info</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">plato.</span>logger.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">plato.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.Gruntfile">module plato.Gruntfile</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.Gruntfile.Gruntfile">
            function <span class="apidocSignatureSpan">plato.</span>Gruntfile
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.getOverviewReport">module plato.getOverviewReport</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.getOverviewReport.getOverviewReport">
            function <span class="apidocSignatureSpan">plato.</span>getOverviewReport
            <span class="apidocSignatureSpan">(reports)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.info">module plato.info</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.info.help">
            function <span class="apidocSignatureSpan">plato.info.</span>help
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.info.version">
            function <span class="apidocSignatureSpan">plato.info.</span>version
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">plato.info.</span>name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.inspect">module plato.inspect</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.inspect.inspect">
            function <span class="apidocSignatureSpan">plato.</span>inspect
            <span class="apidocSignatureSpan">(files, outputDir, options, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.logger">module plato.logger</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger.logger">
            function <span class="apidocSignatureSpan">plato.</span>logger
            <span class="apidocSignatureSpan">(level)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">plato.logger.</span>DEBUG</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">plato.logger.</span>ERROR</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">plato.logger.</span>INFO</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">plato.logger.</span>TRACE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">plato.logger.</span>WARNING</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.logger.prototype">module plato.logger.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger.prototype.debug">
            function <span class="apidocSignatureSpan">plato.logger.prototype.</span>debug
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger.prototype.error">
            function <span class="apidocSignatureSpan">plato.logger.prototype.</span>error
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger.prototype.info">
            function <span class="apidocSignatureSpan">plato.logger.prototype.</span>info
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger.prototype.trace">
            function <span class="apidocSignatureSpan">plato.logger.prototype.</span>trace
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.logger.prototype.warning">
            function <span class="apidocSignatureSpan">plato.logger.prototype.</span>warning
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.plato.util">module plato.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.util.escapeHTML">
            function <span class="apidocSignatureSpan">plato.util.</span>escapeHTML
            <span class="apidocSignatureSpan">(html)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.util.findCommonBase">
            function <span class="apidocSignatureSpan">plato.util.</span>findCommonBase
            <span class="apidocSignatureSpan">(files)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.util.formatJSON">
            function <span class="apidocSignatureSpan">plato.util.</span>formatJSON
            <span class="apidocSignatureSpan">(report)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.util.readJSON">
            function <span class="apidocSignatureSpan">plato.util.</span>readJSON
            <span class="apidocSignatureSpan">(file, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.plato.util.stripComments">
            function <span class="apidocSignatureSpan">plato.util.</span>stripComments
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato" id="apidoc.module.plato">module plato</a></h1>


    <h2>
        <a href="#apidoc.element.plato.Gruntfile" id="apidoc.element.plato.Gruntfile">
        function <span class="apidocSignatureSpan">plato.</span>Gruntfile
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Gruntfile = function (grunt) {

  // Project configuration.
  grunt.initConfig({
    nodeunit: {
      files: [&#x27;test/**/*_test.js&#x27;]
    },
    jshint: {
      options: {
        jshintrc: &#x27;.jshintrc&#x27;
      },
      gruntfile: {
        src: &#x27;Gruntfile.js&#x27;
      },
      lib: {
        src: [&#x27;lib/**/*.js&#x27;, &#x27;!lib/assets/**/*.js&#x27;]
      },
      test: {
        src: [&#x27;test/**/*.js&#x27;,&#x27;!test/fixtures/**/*.js&#x27;]
      },
      assets: {
        src: [&#x27;lib/assets/scripts/*.js&#x27;]
      }
    },
    uglify: {
      &#x27;assets&#x27; : {
        files : {
          &#x27;lib/assets/scripts/bundles/core-bundle.js&#x27; : [
            &#x27;lib/assets/scripts/vendor/jquery-1.8.3.min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/lodash.min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/raphael-min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/morris.min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/jquery.fittext.js&#x27;,
            &#x27;lib/assets/scripts/vendor/bootstrap-tooltip.js&#x27;,
            &#x27;lib/assets/scripts/vendor/bootstrap-popover.js&#x27;
          ],
          &#x27;lib/assets/scripts/bundles/codemirror.js&#x27; : [
            &#x27;lib/assets/scripts/vendor/codemirror/codemirror.js&#x27;,
            &#x27;lib/assets/scripts/vendor/codemirror/javascript.js&#x27;,
            &#x27;lib/assets/scripts/vendor/codemirror/util/searchcursor.js&#x27;
          ]
        }
      }
    },
    watch: {
      gruntfile: {
        files: &#x27;&#x3c;%= jshint.gruntfile.src %&#x3e;&#x27;,
        tasks: [&#x27;jshint:gruntfile&#x27;]
      },
      lib: {
        files: &#x27;&#x3c;%= jshint.lib.src %&#x3e;&#x27;,
        tasks: [&#x27;jshint:lib&#x27;, &#x27;nodeunit&#x27;]
      },
      test: {
        files: &#x27;&#x3c;%= jshint.test.src %&#x3e;&#x27;,
        tasks: [&#x27;jshint:test&#x27;, &#x27;nodeunit&#x27;]
      }
    },
    casper : {
      test: {
        files: {
          &#x27;reports/casper.xml&#x27;: [
            &#x27;test/casper-overview.js&#x27;,
            &#x27;test/casper-sortable-file-list.js&#x27;
          ],
        },
        options : {
          test: true,
          verbose: true,
          &#x27;fail-fast&#x27;: true,
          &#x27;log-level&#x27;: &#x27;error&#x27;,
          concise: true,
          parallel : false,
          concurrency : 2
        }
      }
    }
  });

  grunt.loadNpmTasks(&#x27;grunt-contrib-jshint&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-contrib-nodeunit&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-contrib-uglify&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-contrib-watch&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-casper&#x27;);

  grunt.registerTask(&#x27;runtest&#x27;,function(){
    var done = this.async();

    grunt.util.spawn({
        cmd : &#x27;./bin/plato&#x27;,
        args : [
          &#x27;-q&#x27;,
          &#x27;-dtmp&#x27;,
          &#x27;-ttest report&#x27;,
          &#x27;test/fixtures/a.js&#x27;,&#x27;test/fixtures/b.js&#x27;,&#x27;test/fixtures/c-es6.js&#x27;,&#x27;test/fixtures/d-es6.js&#x27;,&#x27;test/fixtures/empty.js&#x27;
        ]
      },
      function(err, result, code){
        console.log(result.stdout);
        console.log(result.stderr);
        if (err || code !== 0) {
          grunt.fatal(&#x27;Running plato binary failed&#x27;);
        }
        done();
      }
    );
  });

  grunt.registerTask(&#x27;runbin&#x27;,function(){
    var done = this.async();

    grunt.util.spawn({
        cmd : &#x27;./bin/plato&#x27;,
        args : [
          &#x27;-q&#x27;,
          &#x27;-r&#x27;,
          &#x27;-l.jshintrc&#x27;,
          &#x27;-xvendor|bundles&#x27;,
          &#x27;-dreports&#x27;,
          &#x27;-tPlato report&#x27;,
          &#x27;lib/&#x27;
        ]
      },
      function(err, result, code){
        console.log(result.stdout);
        if (err || code !== 0) {
          console.log(err);
          grunt.fatal(&#x27;Running plato binary failed&#x27;);
        }
        done();
      }
    );
  });

  grunt.registerTask(&#x27;optimize&#x27;, [&#x27;uglify&#x27;]);
  // Default task.
  grunt.registerTask(&#x27;test&#x27;, [&#x27;jshint&#x27;, &#x27;nodeunit&#x27;, &#x27;runtest&#x27;, &#x27;runbin&#x27;, &#x27;casper&#x27;]);
  grunt.registerTask(&#x27;default&#x27;, [&#x27;test&#x27;]);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.getOverviewReport" id="apidoc.element.plato.getOverviewReport">
        function <span class="apidocSignatureSpan">plato.</span>getOverviewReport
        <span class="apidocSignatureSpan">(reports)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOverviewReport = function (reports) {
  var culledReports = [];
  var summary = {
    total : {
      jshint: 0,
      sloc : 0,
      maintainability : 0
    },
    average : {
      sloc : 0,
      maintainability : 0
    }
  };

  reports.forEach(function(report) {
    // clone objects so we don&#x27;t have to worry about side effects
    summary.total.sloc += report.complexity.methodAggregate.sloc.physical;
    summary.total.maintainability += report.complexity.maintainability;

    var methodAggregate = _.cloneDeep(report.complexity.methodAggregate);
    var reportItem = {};
    reportItem.info = report.info;
    if (report.jshint) {
      summary.total.jshint += report.jshint.messages.length;
      reportItem.jshint = {
        messages : report.jshint.messages.length
      };
    }
    if (report.complexity) {
      reportItem.complexity = {
        methodAggregate : methodAggregate,
        module : report.complexity.module,
        module_safe : report.complexity.module_safe,
        maintainability : _.cloneDeep(report.complexity.maintainability)
      };
    }
    culledReports.push(reportItem);
  });

  summary.average.sloc = ~~(summary.total.sloc / reports.length);
  summary.average.jshint = (summary.total.jshint / reports.length).toFixed(2);
  summary.average.maintainability = (summary.total.maintainability / reports.length).toFixed(2);

  return {
    summary : summary,
    reports : culledReports
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.inspect" id="apidoc.element.plato.inspect">
        function <span class="apidocSignatureSpan">plato.</span>inspect
        <span class="apidocSignatureSpan">(files, outputDir, options, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inspect = function (files, outputDir, options, done) {

	if (!files) {
	  // at least give me a file man...
	  return;
	}

  files = files instanceof Array ? files : [files];
  files = _.flatten(files.map(unary(glob.sync)));

  var flags = {
    complexity : {
      commonjs : true,
      logicalor : true,
      switchcase : true,
      forin : false,
      trycatch : false,
      newmi : true
    },
    jshint : {} // use jshint defaults
  };

  if (options.eslint) {
    options.jshint = options.eslint;
    reporters.jshint = reporters.eslint;
    delete options.eslint;
    delete reporters.eslint;
  }

  Object.keys(flags).forEach(function(flag){
    if (flag in options) flags[flag] = _.clone(options[flag]);
  });

  if (options.q) log.level = Logger.ERROR;

  if (options.date) {
    // if we think we were given seconds
    if (options.date &#x3c; 10000000000 ) options.date = options.date * 1000;
    options.date = new Date(options.date);
  }

  var reports = [];

  var fileOutputDir = outputDir ? path.join(outputDir, fileDir) : false;

  var commonBasePath = util.findCommonBase(files);

  var runReports = function(files, done) {
    files.forEach(function(file) {
      if (options.exclude &#x26;&#x26; options.exclude.test(file)) return;

      if (options.recurse &#x26;&#x26; fs.statSync(file).isDirectory()) {
        files = fs.readdirSync(file).map(function(innerFile) {
          return path.join(file,innerFile);
        });
        runReports(files);
      } else if (file.match(/\.js$/)) {
        log.info(&#x27;Reading &#x22;%s&#x22;&#x27;, file);

        var fileShort = file.replace(commonBasePath, &#x27;&#x27;);
        var fileSafe = fileShort.replace(/[^a-zA-Z0-9]/g,&#x27;_&#x27;);
        var source = fs.readFileSync(file).toString().trim();
        if (!source) {
          log.info(&#x27;Not parsing empty file &#x22;%s&#x22;&#x27;, file);
          return;
        }

        // if skip empty line option
        if(options.noempty) {
          source = source.replace(/^\s*[\r\n]/gm ,&#x22;&#x22;);
        }

        // if begins with shebang
        if (source[0] === &#x27;#&#x27; &#x26;&#x26; source[1] === &#x27;!&#x27;) {
          source = &#x27;//&#x27; + source;
        }
        var report = {
          info : {
            file : file,
            fileShort : fileShort,
            fileSafe : fileSafe,
            link : fileDir + &#x27;/&#x27; + fileSafe + &#x27;/index.html&#x27;
          }
        };

        var error = false;
        _.each(reporters,function(reporter, name) {
          if (!flags[name]) return;
          try {
            report[name] = reporter.process(source, flags[name], report.info);
          } catch (e) {
            error = true;
            log.error(&#x27;Error reading file %s: &#x27;, file, e.toString());
            log.error(e.stack);
          }
        });

        if (error) return;
        reports.push(report);
        if (fileOutputDir) {
          var outdir = path.join(fileOutputDir, report.info.fileSafe);
          if (!fs.existsSync(outdir)) fs.mkdirSync(outdir);
          writeFileReport(outdir, report, source, options);
        }
      }
    });
    if (done) done();
  };

  if (!fileOutputDir) {
    runReports(files,function() {
      done(reports);
    });
  } else {
    fs.mkdirp(fileOutputDir,function() {
      runReports(files,function() {
        var reportFilePrefix = path.join(outputDir, &#x27;report&#x27;);
        var overview = path.join(outputDir, &#x27;index.html&#x27;);
        var wallDisplay = path.join(outputDir, &#x27;display.html&#x27;);

        fs.copy(assets, path.join(outputDir, &#x27;assets&#x27;), function() {
          var overviewReport = exports.getOverviewReport(reports);
          updateHistoricalOverview(reportFilePrefix, overviewReport, options);
          writeReport(reportFilePrefix, overviewReport);
          writeOverview(overview, overviewReport, {
            title : options.title,
            flags : flags
          }, overviewTemplate);
          writeOverview(wallDisplay, overviewReport, {
            title : options.title,
            flags : flags
          }, displayTemplate);
          done(reports);
        });
      });
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

var callback = function (report){
// once done the analysis,
// execute this
};

plato.<span class="apidocCodeKeywordSpan">inspect</span>(files, outputDir, options, callback);
```

## Data sources

- Complexity data by [Phil Booth](https://github.com/philbooth)&#x27;s [complexity-report](https://github.com/philbooth/complexityReport
.js)
- Lint data from [jshint](https://github.com/jshint/jshint/) and [eslint](https://github.com/eslint/eslint)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.logger" id="apidoc.element.plato.logger">
        function <span class="apidocSignatureSpan">plato.</span>logger
        <span class="apidocSignatureSpan">(level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Logger(level) {
  this.level = level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.Gruntfile" id="apidoc.module.plato.Gruntfile">module plato.Gruntfile</a></h1>


    <h2>
        <a href="#apidoc.element.plato.Gruntfile.Gruntfile" id="apidoc.element.plato.Gruntfile.Gruntfile">
        function <span class="apidocSignatureSpan">plato.</span>Gruntfile
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Gruntfile = function (grunt) {

  // Project configuration.
  grunt.initConfig({
    nodeunit: {
      files: [&#x27;test/**/*_test.js&#x27;]
    },
    jshint: {
      options: {
        jshintrc: &#x27;.jshintrc&#x27;
      },
      gruntfile: {
        src: &#x27;Gruntfile.js&#x27;
      },
      lib: {
        src: [&#x27;lib/**/*.js&#x27;, &#x27;!lib/assets/**/*.js&#x27;]
      },
      test: {
        src: [&#x27;test/**/*.js&#x27;,&#x27;!test/fixtures/**/*.js&#x27;]
      },
      assets: {
        src: [&#x27;lib/assets/scripts/*.js&#x27;]
      }
    },
    uglify: {
      &#x27;assets&#x27; : {
        files : {
          &#x27;lib/assets/scripts/bundles/core-bundle.js&#x27; : [
            &#x27;lib/assets/scripts/vendor/jquery-1.8.3.min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/lodash.min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/raphael-min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/morris.min.js&#x27;,
            &#x27;lib/assets/scripts/vendor/jquery.fittext.js&#x27;,
            &#x27;lib/assets/scripts/vendor/bootstrap-tooltip.js&#x27;,
            &#x27;lib/assets/scripts/vendor/bootstrap-popover.js&#x27;
          ],
          &#x27;lib/assets/scripts/bundles/codemirror.js&#x27; : [
            &#x27;lib/assets/scripts/vendor/codemirror/codemirror.js&#x27;,
            &#x27;lib/assets/scripts/vendor/codemirror/javascript.js&#x27;,
            &#x27;lib/assets/scripts/vendor/codemirror/util/searchcursor.js&#x27;
          ]
        }
      }
    },
    watch: {
      gruntfile: {
        files: &#x27;&#x3c;%= jshint.gruntfile.src %&#x3e;&#x27;,
        tasks: [&#x27;jshint:gruntfile&#x27;]
      },
      lib: {
        files: &#x27;&#x3c;%= jshint.lib.src %&#x3e;&#x27;,
        tasks: [&#x27;jshint:lib&#x27;, &#x27;nodeunit&#x27;]
      },
      test: {
        files: &#x27;&#x3c;%= jshint.test.src %&#x3e;&#x27;,
        tasks: [&#x27;jshint:test&#x27;, &#x27;nodeunit&#x27;]
      }
    },
    casper : {
      test: {
        files: {
          &#x27;reports/casper.xml&#x27;: [
            &#x27;test/casper-overview.js&#x27;,
            &#x27;test/casper-sortable-file-list.js&#x27;
          ],
        },
        options : {
          test: true,
          verbose: true,
          &#x27;fail-fast&#x27;: true,
          &#x27;log-level&#x27;: &#x27;error&#x27;,
          concise: true,
          parallel : false,
          concurrency : 2
        }
      }
    }
  });

  grunt.loadNpmTasks(&#x27;grunt-contrib-jshint&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-contrib-nodeunit&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-contrib-uglify&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-contrib-watch&#x27;);
  grunt.loadNpmTasks(&#x27;grunt-casper&#x27;);

  grunt.registerTask(&#x27;runtest&#x27;,function(){
    var done = this.async();

    grunt.util.spawn({
        cmd : &#x27;./bin/plato&#x27;,
        args : [
          &#x27;-q&#x27;,
          &#x27;-dtmp&#x27;,
          &#x27;-ttest report&#x27;,
          &#x27;test/fixtures/a.js&#x27;,&#x27;test/fixtures/b.js&#x27;,&#x27;test/fixtures/c-es6.js&#x27;,&#x27;test/fixtures/d-es6.js&#x27;,&#x27;test/fixtures/empty.js&#x27;
        ]
      },
      function(err, result, code){
        console.log(result.stdout);
        console.log(result.stderr);
        if (err || code !== 0) {
          grunt.fatal(&#x27;Running plato binary failed&#x27;);
        }
        done();
      }
    );
  });

  grunt.registerTask(&#x27;runbin&#x27;,function(){
    var done = this.async();

    grunt.util.spawn({
        cmd : &#x27;./bin/plato&#x27;,
        args : [
          &#x27;-q&#x27;,
          &#x27;-r&#x27;,
          &#x27;-l.jshintrc&#x27;,
          &#x27;-xvendor|bundles&#x27;,
          &#x27;-dreports&#x27;,
          &#x27;-tPlato report&#x27;,
          &#x27;lib/&#x27;
        ]
      },
      function(err, result, code){
        console.log(result.stdout);
        if (err || code !== 0) {
          console.log(err);
          grunt.fatal(&#x27;Running plato binary failed&#x27;);
        }
        done();
      }
    );
  });

  grunt.registerTask(&#x27;optimize&#x27;, [&#x27;uglify&#x27;]);
  // Default task.
  grunt.registerTask(&#x27;test&#x27;, [&#x27;jshint&#x27;, &#x27;nodeunit&#x27;, &#x27;runtest&#x27;, &#x27;runbin&#x27;, &#x27;casper&#x27;]);
  grunt.registerTask(&#x27;default&#x27;, [&#x27;test&#x27;]);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.getOverviewReport" id="apidoc.module.plato.getOverviewReport">module plato.getOverviewReport</a></h1>


    <h2>
        <a href="#apidoc.element.plato.getOverviewReport.getOverviewReport" id="apidoc.element.plato.getOverviewReport.getOverviewReport">
        function <span class="apidocSignatureSpan">plato.</span>getOverviewReport
        <span class="apidocSignatureSpan">(reports)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOverviewReport = function (reports) {
  var culledReports = [];
  var summary = {
    total : {
      jshint: 0,
      sloc : 0,
      maintainability : 0
    },
    average : {
      sloc : 0,
      maintainability : 0
    }
  };

  reports.forEach(function(report) {
    // clone objects so we don&#x27;t have to worry about side effects
    summary.total.sloc += report.complexity.methodAggregate.sloc.physical;
    summary.total.maintainability += report.complexity.maintainability;

    var methodAggregate = _.cloneDeep(report.complexity.methodAggregate);
    var reportItem = {};
    reportItem.info = report.info;
    if (report.jshint) {
      summary.total.jshint += report.jshint.messages.length;
      reportItem.jshint = {
        messages : report.jshint.messages.length
      };
    }
    if (report.complexity) {
      reportItem.complexity = {
        methodAggregate : methodAggregate,
        module : report.complexity.module,
        module_safe : report.complexity.module_safe,
        maintainability : _.cloneDeep(report.complexity.maintainability)
      };
    }
    culledReports.push(reportItem);
  });

  summary.average.sloc = ~~(summary.total.sloc / reports.length);
  summary.average.jshint = (summary.total.jshint / reports.length).toFixed(2);
  summary.average.maintainability = (summary.total.maintainability / reports.length).toFixed(2);

  return {
    summary : summary,
    reports : culledReports
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.info" id="apidoc.module.plato.info">module plato.info</a></h1>


    <h2>
        <a href="#apidoc.element.plato.info.help" id="apidoc.element.plato.info.help">
        function <span class="apidocSignatureSpan">plato.info.</span>help
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">help = function () {
  console.log(&#x27;\nUsage : %s [options] file1.js file2.js ... fileN.js&#x27;, pkg.name);
  Object.keys(options).forEach(function(shortOption){
    var option = options[shortOption];
    console.log(
      &#x27;  -%s%s%s%s&#x27;,
      shortOption,
      option.long ? &#x27;, --&#x27; + option.long : &#x27;&#x27;,
      option.type !== &#x27;Boolean&#x27; ? &#x27; : &#x27; + option.type : &#x27;&#x27;,
      option.required ? &#x27; *required*&#x27; : &#x27;&#x27;
    );
    console.log(&#x27;      %s&#x27;, option.desc);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.info.version" id="apidoc.element.plato.info.version">
        function <span class="apidocSignatureSpan">plato.info.</span>version
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">version = function () {
  console.log(pkg.version);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.inspect" id="apidoc.module.plato.inspect">module plato.inspect</a></h1>


    <h2>
        <a href="#apidoc.element.plato.inspect.inspect" id="apidoc.element.plato.inspect.inspect">
        function <span class="apidocSignatureSpan">plato.</span>inspect
        <span class="apidocSignatureSpan">(files, outputDir, options, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inspect = function (files, outputDir, options, done) {

	if (!files) {
	  // at least give me a file man...
	  return;
	}

  files = files instanceof Array ? files : [files];
  files = _.flatten(files.map(unary(glob.sync)));

  var flags = {
    complexity : {
      commonjs : true,
      logicalor : true,
      switchcase : true,
      forin : false,
      trycatch : false,
      newmi : true
    },
    jshint : {} // use jshint defaults
  };

  if (options.eslint) {
    options.jshint = options.eslint;
    reporters.jshint = reporters.eslint;
    delete options.eslint;
    delete reporters.eslint;
  }

  Object.keys(flags).forEach(function(flag){
    if (flag in options) flags[flag] = _.clone(options[flag]);
  });

  if (options.q) log.level = Logger.ERROR;

  if (options.date) {
    // if we think we were given seconds
    if (options.date &#x3c; 10000000000 ) options.date = options.date * 1000;
    options.date = new Date(options.date);
  }

  var reports = [];

  var fileOutputDir = outputDir ? path.join(outputDir, fileDir) : false;

  var commonBasePath = util.findCommonBase(files);

  var runReports = function(files, done) {
    files.forEach(function(file) {
      if (options.exclude &#x26;&#x26; options.exclude.test(file)) return;

      if (options.recurse &#x26;&#x26; fs.statSync(file).isDirectory()) {
        files = fs.readdirSync(file).map(function(innerFile) {
          return path.join(file,innerFile);
        });
        runReports(files);
      } else if (file.match(/\.js$/)) {
        log.info(&#x27;Reading &#x22;%s&#x22;&#x27;, file);

        var fileShort = file.replace(commonBasePath, &#x27;&#x27;);
        var fileSafe = fileShort.replace(/[^a-zA-Z0-9]/g,&#x27;_&#x27;);
        var source = fs.readFileSync(file).toString().trim();
        if (!source) {
          log.info(&#x27;Not parsing empty file &#x22;%s&#x22;&#x27;, file);
          return;
        }

        // if skip empty line option
        if(options.noempty) {
          source = source.replace(/^\s*[\r\n]/gm ,&#x22;&#x22;);
        }

        // if begins with shebang
        if (source[0] === &#x27;#&#x27; &#x26;&#x26; source[1] === &#x27;!&#x27;) {
          source = &#x27;//&#x27; + source;
        }
        var report = {
          info : {
            file : file,
            fileShort : fileShort,
            fileSafe : fileSafe,
            link : fileDir + &#x27;/&#x27; + fileSafe + &#x27;/index.html&#x27;
          }
        };

        var error = false;
        _.each(reporters,function(reporter, name) {
          if (!flags[name]) return;
          try {
            report[name] = reporter.process(source, flags[name], report.info);
          } catch (e) {
            error = true;
            log.error(&#x27;Error reading file %s: &#x27;, file, e.toString());
            log.error(e.stack);
          }
        });

        if (error) return;
        reports.push(report);
        if (fileOutputDir) {
          var outdir = path.join(fileOutputDir, report.info.fileSafe);
          if (!fs.existsSync(outdir)) fs.mkdirSync(outdir);
          writeFileReport(outdir, report, source, options);
        }
      }
    });
    if (done) done();
  };

  if (!fileOutputDir) {
    runReports(files,function() {
      done(reports);
    });
  } else {
    fs.mkdirp(fileOutputDir,function() {
      runReports(files,function() {
        var reportFilePrefix = path.join(outputDir, &#x27;report&#x27;);
        var overview = path.join(outputDir, &#x27;index.html&#x27;);
        var wallDisplay = path.join(outputDir, &#x27;display.html&#x27;);

        fs.copy(assets, path.join(outputDir, &#x27;assets&#x27;), function() {
          var overviewReport = exports.getOverviewReport(reports);
          updateHistoricalOverview(reportFilePrefix, overviewReport, options);
          writeReport(reportFilePrefix, overviewReport);
          writeOverview(overview, overviewReport, {
            title : options.title,
            flags : flags
          }, overviewTemplate);
          writeOverview(wallDisplay, overviewReport, {
            title : options.title,
            flags : flags
          }, displayTemplate);
          done(reports);
        });
      });
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

var callback = function (report){
// once done the analysis,
// execute this
};

plato.<span class="apidocCodeKeywordSpan">inspect</span>(files, outputDir, options, callback);
```

## Data sources

- Complexity data by [Phil Booth](https://github.com/philbooth)&#x27;s [complexity-report](https://github.com/philbooth/complexityReport
.js)
- Lint data from [jshint](https://github.com/jshint/jshint/) and [eslint](https://github.com/eslint/eslint)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.logger" id="apidoc.module.plato.logger">module plato.logger</a></h1>


    <h2>
        <a href="#apidoc.element.plato.logger.logger" id="apidoc.element.plato.logger.logger">
        function <span class="apidocSignatureSpan">plato.</span>logger
        <span class="apidocSignatureSpan">(level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Logger(level) {
  this.level = level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.logger.prototype" id="apidoc.module.plato.logger.prototype">module plato.logger.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.plato.logger.prototype.debug" id="apidoc.element.plato.logger.prototype.debug">
        function <span class="apidocSignatureSpan">plato.logger.prototype.</span>debug
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function () {
  if (i &#x3e;= this.level) console.log.apply(console,arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

exports.readJSON = function (file, options) {
if (options.q) log.level = Logger.ERROR;
var result = {};
if (fs.existsSync(file)) {
  log.<span class="apidocCodeKeywordSpan">debug</span>(&#x27;Parsing JSON from file %s&#x27;, file);
  try {
    var src = fs.readFileSync(file);
    result = JSON.parse(src);
  } catch(e) {
    log.warning(&#x27;Could not parse JSON from file %s&#x27;, file);
  }
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.logger.prototype.error" id="apidoc.element.plato.logger.prototype.error">
        function <span class="apidocSignatureSpan">plato.logger.prototype.</span>error
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function () {
  if (i &#x3e;= this.level) console.log.apply(console,arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.logger.prototype.info" id="apidoc.element.plato.logger.prototype.info">
        function <span class="apidocSignatureSpan">plato.logger.prototype.</span>info
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function () {
  if (i &#x3e;= this.level) console.log.apply(console,arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  try {
    var src = fs.readFileSync(file);
    result = JSON.parse(src);
  } catch(e) {
    log.warning(&#x27;Could not parse JSON from file %s&#x27;, file);
  }
} else {
  log.<span class="apidocCodeKeywordSpan">info</span>(&#x27;Not parsing missing file &#x22;%s&#x22;&#x27;, file);
}
return result;
};

exports.stripComments = function (str) {
/*jshint regexp:false */
str = str || &#x27;&#x27;;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.logger.prototype.trace" id="apidoc.element.plato.logger.prototype.trace">
        function <span class="apidocSignatureSpan">plato.logger.prototype.</span>trace
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trace = function () {
  if (i &#x3e;= this.level) console.log.apply(console,arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.logger.prototype.warning" id="apidoc.element.plato.logger.prototype.warning">
        function <span class="apidocSignatureSpan">plato.logger.prototype.</span>warning
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warning = function () {
  if (i &#x3e;= this.level) console.log.apply(console,arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var result = {};
  if (fs.existsSync(file)) {
    log.debug(&#x27;Parsing JSON from file %s&#x27;, file);
    try {
      var src = fs.readFileSync(file);
      result = JSON.parse(src);
    } catch(e) {
      log.<span class="apidocCodeKeywordSpan">warning</span>(&#x27;Could not parse JSON from file %s&#x27;, file);
    }
  } else {
    log.info(&#x27;Not parsing missing file &#x22;%s&#x22;&#x27;, file);
  }
  return result;
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.plato.util" id="apidoc.module.plato.util">module plato.util</a></h1>


    <h2>
        <a href="#apidoc.element.plato.util.escapeHTML" id="apidoc.element.plato.util.escapeHTML">
        function <span class="apidocSignatureSpan">plato.util.</span>escapeHTML
        <span class="apidocSignatureSpan">(html)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escapeHTML = function (html) {
  return html
      .replace(/&#x26;/g, &#x22;&#x26;amp;&#x22;)
      .replace(/&#x3c;/g, &#x22;&#x26;lt;&#x22;)
      .replace(/&#x3e;/g, &#x22;&#x26;gt;&#x22;)
      .replace(/&#x22;/g, &#x22;&#x26;quot;&#x22;)
      .replace(/&#x27;/g, &#x22;&#x26;#039;&#x22;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.util.findCommonBase" id="apidoc.element.plato.util.findCommonBase">
        function <span class="apidocSignatureSpan">plato.util.</span>findCommonBase
        <span class="apidocSignatureSpan">(files)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findCommonBase = function (files) {
  if (!files || files.length === 1) return &#x27;&#x27;;
  var lastSlash = files[0].lastIndexOf(path.sep);
  if (!lastSlash) return &#x27;&#x27;;
  var first = files[0].substr(0, lastSlash + 1);
  var prefixlen = first.length;
  files.forEach(function(file){
    for (var i = prefixlen; i &#x3e; 0; i--) {
      if (file.substr(0,i) === first.substr(0,i)) {
        prefixlen = i;
        return;
      }
    }
    prefixlen = 0;
  });
  return first.substr(0,prefixlen);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.util.formatJSON" id="apidoc.element.plato.util.formatJSON">
        function <span class="apidocSignatureSpan">plato.util.</span>formatJSON
        <span class="apidocSignatureSpan">(report)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">formatJSON = function (report) {
  return JSON.stringify(report, function(k,v){
    if (k === &#x27;identifiers&#x27;) return [&#x27;__stripped__&#x27;];
    return v;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.util.readJSON" id="apidoc.element.plato.util.readJSON">
        function <span class="apidocSignatureSpan">plato.util.</span>readJSON
        <span class="apidocSignatureSpan">(file, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readJSON = function (file, options) {
  if (options.q) log.level = Logger.ERROR;
  var result = {};
  if (fs.existsSync(file)) {
    log.debug(&#x27;Parsing JSON from file %s&#x27;, file);
    try {
      var src = fs.readFileSync(file);
      result = JSON.parse(src);
    } catch(e) {
      log.warning(&#x27;Could not parse JSON from file %s&#x27;, file);
    }
  } else {
    log.info(&#x27;Not parsing missing file &#x22;%s&#x22;&#x27;, file);
  }
  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.plato.util.stripComments" id="apidoc.element.plato.util.stripComments">
        function <span class="apidocSignatureSpan">plato.util.</span>stripComments
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stripComments = function (str) {
<span class="apidocCodeCommentSpan">  /*jshint regexp:false */
</span>  str = str || &#x27;&#x27;;

  var multiline = /\/\*(?:(?!\*\/)|.|\n)*?\*\//g;
  var singleline = /\/\/.*/g;

  return str.replace(multiline, &#x27;&#x27;).replace(singleline, &#x27;&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
